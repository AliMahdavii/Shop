<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/profile.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <title>Document</title>
</head>
<body>
    <div class="profile-container">
        <div class="user-header">
            <i class="fa-solid fa-user-circle"></i>
            <h2 id="username">ุญุณุงุจ ฺฉุงุฑุจุฑ</h2>
        </div>

        <div class="user-info">
            <p><strong>ูุงู ฺฉุงุฑุจุฑ:</strong> <span id="user-name"></span> </p>
        </div>
        
        <div class="favorites">
            <h3 id="favorite-toggle">
                ุนูุงููโููุฏโูุง ูู
                <i class="fa-solid fa-chevron-down"></i>
            </h3>
            <div class="favorite-list" id="favorite-list"></div>
        </div>

        <button class="logout-btn" id="logout">ุฎุฑูุฌ ุงุฒ ุญุณุงุจ</button>

        <a href="index.html" class="back" >ุจุงุฒฺฏุดุช ุจู ุตูุญู ุงุตู</a>

    </div>

    <footer>
        <div class="row">
            <div class="col-lg-8">
                <div class="right">
                    <div class="title">
                        ุฏุฑุจุงุฑู ูุง
                    </div>
                    <div class="des">
                        Carhartt WIP | ุงุตุงูุช ุดูุฑุ ฺฉูุช ุจโฺููโูฺุฑุง
<br>ูุง ุงูุฌุง ูุณุชู ุชุง ูุจุงุณโูุง ู ุงฺฉุณุณูุฑโูุง ุงุฑุงุฆู ุจุฏู ฺฉู ููโุชููุง ุฑุงุญุช ู ุจุง ุฏูุงู ูุณุชูุ ุจูฺฉู ุณุจฺฉ ุฒูุฏฺฏ ู ุดุฎุตุช ุดูุง ุฑู ูู ุชุนุฑู ูโฺฉูู. ูุฑ ูุทุนู ฺฉุงุฑูุงุฑุช ุจุง ุฏูุช ุทุฑุงุญ ุดุฏู ุชุง ุฏุฑ ุฎุงุจููโูุง ุดูุฑ ู ูุญุทโูุง ฺฉุงุฑ ุณุฎุชุ ููุฑุงู ุดูุง ุจุงุดู.
ุจุง ูุง ุชุฌุฑุจูโุง ุงุฒ ุงุณุชุงู ุงุตู ุดูุฑ ุฏุงุดุชู ุจุงุดู: ุงุฒ ฺฉุงูพุดูโูุง ู ุฌูููโูุง ููุงูู ฺฏุฑูุชู ุชุง ุดููุงุฑูุง ู ุงฺฉุณุณูุฑโูุง ุฎูู ฺฉู ูุฑ ุฑูุฒุชูู ุฑู ุฑุงุญุชโุชุฑ ู ุฌุฐุงุจโุชุฑ ูโฺฉูู. ฺฉูุชุ ุฌุฒุฆุงุช ู ุฏูุงูุ ููุดู ุฏุฑ ุงูููุช ูุงุณุช.<br>
๐ฆ ุงุฑุณุงู ุณุฑุน ู ูุทูุฆู
<br>
๐ ูพุฑุฏุงุฎุช ุงูู ู ุขุณุงู
<br>
โญ ฺฉูุช ุชุถูู ู ุงุตุงูุช ุจุฑูุฏ
<br>

ุจู ุฌูุน ฺฉุงุฑูุงุฑุช WIP ุจูพููุฏุฏ ู ุณุจฺฉ ุฎูุฏุชูู ุฑู ุจู ููู ูุดูู ุจุฏุฏ!
                    </div>
                </div>   
            </div>
            <div class="col-lg-4">
                <div class="left">
                    <div class="title">
                        ูุง ุฑุง ุฏุฑ ุดุจฺฉู ูุง ุงุฌุชูุงุน ุฏูุจุงู ฺฉูุฏ :
                    </div>
                    <div class="socials">
                        <a href=""><i class="fab fa-twitter"></i></a>
                        <a href=""><i class="fab fa-instagram"></i></a>
                        <a href=""><i class="fab fa-linkedin"></i></a>
                        <a href=""><i class="fab fa-telegram-plane"></i></a>
                    </div>
                </div>
            </div>
        </div>
        <div class="bottom">
                ฺฉูู ุญููู ูุญููุธ ู ุจุงุดุฏ 2025 ยฉ
        </div>
    </footer>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const loggedInUser = JSON.parse(localStorage.getItem("logged-in"))?.username;
            if(!loggedInUser){
                alert("ุงุจุชุฏุง ูุงุฑุฏ ุญุณุงุจ ฺฉุงุฑุจุฑ ุดูุฏ!");
                window.location.href = "login.html";
                return;
            }
            document.getElementById("username").textContent = `ุณูุงูุ ${loggedInUser}!`;
            document.getElementById("user-name").textContent = loggedInUser;

            const userData = JSON.parse(localStorage.getItem(loggedInUser)) || {};
            const favorites = userData.favorites || [];
            const favoriteList = document.getElementById("favorite-list");

            if(favorites.length === 0){
                favoriteList.innerHTML = "<p class='empty-message'>ูููุฒ ูฺ ูุญุตูู ุฏุฑ ุนูุงููโููุฏโูุง ูุฏุงุฑุฏ ๐ค</p>"
            } else {
                favoriteList.innerHTML = favorites.map(fav => 
                    `<div class="fav-item" onclick="openProduct('${fav.id}')">
                        <img src="${fav.mainImage}">
                        <div class="fav-details">
                            <h4>${fav.name}</h4>    
                            <p>${fav.price.toLocaleString()} ุชููุงู</p>
                        </div>
                    </div>
                    `).join('');
            }

                document.getElementById("logout").addEventListener("click", () => {
                if(confirm("ุขุง ุจุฑุง ุฎุฑูุฌ ูุทูู ูุณุชุฏ ุ")){
                    localStorage.removeItem("logged-in");
                    alert("ุจุง ููููุช ุงุฒ ุญุณุงุจ ุฎุงุฑุฌ ุดุฏุฏ.");
                window.location.href = "login.html";
                }
            });

            const favoritesSection = document.querySelector(".favorites");
            const toggleBtn = document.getElementById("favorite-toggle");

            toggleBtn.addEventListener("click", () => {
                favoritesSection.classList.toggle("open");
            });
        });

        function openProduct(id){
        window.location.href = `product.html?id=${id}`;
    }
    </script>

</body>
</html>
